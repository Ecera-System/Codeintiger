!function(e,t,n,o){"use strict";var i=t.csk=t.csk||{};i.i18n=i.i18n||{},i.languages=i.languages||{},i.modules=i.modules||{},i.plugins=i.plugins||{},i.themes=i.themes||{},i.i18n.languages=i.i18n.languages||{},i.i18n.modules=i.i18n.modules||{},i.i18n.plugins=i.i18n.plugins||{},i.i18n.themes=i.i18n.themes||{},"undefined"!=typeof bootbox&&bootbox.setDefaults({backdrop:!1,closeButton:!1,locale:i.config.lang.code,size:"small"}),i.ui={confirm:function(e,t,n){"undefined"!=typeof bootbox?bootbox.confirm({message:e,buttons:{confirm:{className:"btn btn-primary btn-sm"},cancel:{className:"btn btn-default btn-sm"}},callback:function(e){bootbox.hideAll(),!0===e&&"function"==typeof t?t(!0):"function"==typeof n&&n(!0)}}):confirm(e)&&"function"==typeof t?t(!0):"function"==typeof n&&n(!0)},alert:function(t,o){if(!t.length)return!1;if("error"===(o=o||"info")&&(o="danger"),"undefined"==typeof toastr)if("object"!=typeof Handlebars)alert(t.replace(/(<([^>]+)>)/gi,""));else{var i=e("#csk-alert"),a=n.getElementById("csk-alert-template").innerHTML,s=Handlebars.compile(a)({message:t,type:o});i.length?i.fadeOut(function(){e(this).remove(),e(s).prependTo("#wrapper > .container")}):e(s).prependTo("#wrapper > .container")}else switch(o){case"success":toastr.success(t);break;case"error":case"danger":toastr.error(t);break;case"warning":toastr.warning(t);break;case"info":default:toastr.info(t)}},reload:function(t,n,o){t=t||"#wrapper",!0===(n=n||!0)&&e("#navbar-admin").load(i.config.currentURL+" #navbar-admin > *"),t.length&&"function"==typeof o?e(t).load(i.config.currentURL+" "+t+" > *",o):t.length&&e(t).load(i.config.currentURL+" "+t+" > *")},inViewport:function(e){var o=e.getBoundingClientRect();return o.bottom>=0&&o.right>=0&&o.top<=(t.innerHeight||n.documentElement.clientHeight)&&o.left<=(t.innerWidth||n.documentElement.clientWidth)},addListener:function(e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,n)},lazyLoad:function(){for(var t=e("img[data-src]"),n=0;n<t.length;n++){var o=t[n];i.ui.inViewport(o)&&(o.src=o.getAttribute("data-src"),o.onload=function(){this.removeAttribute("data-src")})}}},i.ajax={requests:[],requesting:!1,context:o,request:function(t,n){(n=n||{}).context;var a=n.type||"GET";n=e.extend({url:t,method:a,type:a,async:!0,cache:!1,dataType:"json",success:function(e,t,n){i.ajax._response(e)},error:function(e,t,n){var a=e.responseJSON||o;void 0!==a&&"undefined"!==a.message&&a.message.length&&i.ui.alert(a.message,"error")}},n),this.requests.push(n),this._execute()},stop:function(){this.requests=[]},_execute:function(){if(0!=this.requests.length&&1!=this.requesting){var t=this.requests.splice(0,1)[0],n=t.complete,o=this;t._execute&&t._execute(t),t.complete=function(){n&&n.apply(this,arguments),o.requesting=!1,o._execute()},this.requesting=!0,e.ajax(t)}},_response:function(e){e=e||{};if(i.ajax.context=this,void 0!==e.message&&e.message.length&&i.ui.alert(e.message,"success"),void 0!==e.scripts)for(var t=e.scripts.length,n=0;n<t;n++)try{new Function(e.scripts[n]).call(this)}catch(e){console.log(e)}}},i.ui.addListener("load",i.ui.lazyLoad),i.ui.addListener("scroll",i.ui.lazyLoad),e(n).ready(function(){if("undefined"!=typeof toastr&&(toastr.options={closeButton:!0,positionClass:"toast-top-center",hideDuration:"300",timeOut:"2500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},"rtl"===i.config.lang.direction&&(toastr.options.rtl=!0)),e(n).on("change",":checkbox[name=check-all]",function(){e(this).closest("table").find("tbody :checkbox").prop("checked",this.checked).closest("tr").toggleClass("selected",this.checked)}),e(n).on("change",":checkbox.check-this",function(){e(this).parents("tr").toggleClass("selected",this.checked)}),void 0!==e.fn.tooltip&&e("body").tooltip({selector:"[data-toggle=tooltip], [rel=tooltip]"}),void 0!==e.fn.popover&&e("body").tooltip({selector:"[data-toggle=popover], [rel=popover]"}),e(n).on("submit","form",function(t){var n=e(this);return n.find("[type=submit]").prop("disabled",!0).addClass("disabled"),n.submit(function(){return!1}),!0}),void 0!==e.fn.garlic&&e("[rel=persist]").garlic(),e(n).on("click","a[rel]",function(t){var n=e(this),o=n.attr("rel"),a=n.attr("href");if(void 0===a||!a.length)return t.preventDefault(),!1;if(o.length&&"async"===o&&"async-post"===o){t.preventDefault();var s="async"===o?"GET":"POST";return i.ajax.request(a,{el:this,type:s,beforeSend:function(){n.prop("disabled")||n.prop("disabled",!0).addClass("disabled")},complete:function(){n.prop("disabled",!1).removeClass("disabled")}}),!1}}),e(n).on("submit","form[rel]",function(t){var n=e(this),o=n.attr("rel"),a=n.attr("action");if(void 0===a||!a.length)return t.preventDefault(),!1;switch(o){case"async":return t.preventDefault(),i.ajax.request(a,{el:this,type:"POST",data:n.serializeArray(),beforeSend:function(){n.prop("disabled")||n.find("[type=submit]").prop("disabled",!0).addClass("disabled")},complete:function(){n.find("[type=submit]").prop("disabled",!1).removeClass("disabled")}}),!1}}),void 0!==e.fn.modal){var a=e(".modal");a.length&&a.modal("show")}e(n).on("hidden.bs.modal",".modal",function(t){e(this).remove()}),e(n).on("click","[data-confirm]",function(n){n.preventDefault();var o=e(this),a=o.attr("href"),s=o.data("confirm");return!!a.length&&(s.length?i.ui.confirm(s,function(){t.location.href=a}):void(t.location.href=a))}),e(n).on("click","[data-action]",function(n){n.preventDefault();var a=e(this),s=a.data("action")||-1,r=a.data("target")||o,c=a.data("name")||"this",l=a.data("endpoint")||a.attr("href")||o;if(s<=0)return console.log("error action"),!1;if(void 0===r||!r.length||void 0===i[r])return!1;if(void 0===l||!l.length)return console.log("error endpoint"),!1;var d=i.i18n[r][s]||o;void 0===d&&void 0===(d=i.i18n[s]||o)&&(d="Are you sure you to "+s+" %s?");var u=a.closest("tr");u.length&&u.siblings("tr").addClass("op-2"),void 0!==d&&d.length?i.ui.confirm(e.sprintf(d,c),function(){t.location.href=l},function(){u.length&&u.siblings("tr").removeClass("op-2")}):t.location.href=l})})}(window.jQuery||window.Zepto,window,document);
