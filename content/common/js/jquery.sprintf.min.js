jQuery.vsprintf=function(e,r){if(null==e)throw"Not enough arguments for vsprintf";function t(e,r,t){if(null==r)return"s"==e?"":"0";var n,s="",o="",a=" ";if(t.short||t.long||t.long_long)switch(e){case"e":case"f":case"G":case"E":case"G":case"d":t.short?r>=32767?r=32767:r<=-32768&&(r=-32768):t.long?r>=2147483647?r=2147483647:r<=-2147483648&&(r=-2147483648):r>=0x8000000000000000?r=0x8000000000000000:r<=-0x8000000000000000&&(r=-0x8000000000000000);break;case"X":case"B":case"u":case"o":case"x":case"b":r<0&&(r=Math.abs(r)-1),t.short?r>=65535&&(r=65535):t.long?r>=4294967295&&(r=4294967295):r>=0x10000000000000000&&(r=0x10000000000000000)}switch(e){case"c":n=String.fromCharCode(parseInt(r));break;case"s":n=r.toString();break;case"d":case"u":n=new Number(parseInt(r)).toString();break;case"o":n=new Number(parseInt(r)).toString(8);break;case"x":n=new Number(parseInt(r)).toString(16);break;case"B":case"b":n=new Number(parseInt(r)).toString(2);break;case"e":var i=t.precision?t.precision:6;n=new Number(r).toExponential(i).toString();break;case"f":i=t.precision?t.precision:6;n=new Number(r).toFixed(i).toString();break;case"g":i=t.precision?t.precision:6;n=new Number(r).toPrecision(i).toString();break;case"X":n=new Number(parseInt(r)).toString(16).toUpperCase();break;case"E":i=t.precision?t.precision:6;n=new Number(r).toExponential(i).toString().toUpperCase();break;case"G":i=t.precision?t.precision:6;n=new Number(r).toPrecision(i).toString().toUpperCase()}if(t["+"]&&parseFloat(r)>0&&-1!=["d","e","f","g","E","G"].indexOf(e)&&(s="+"),t[" "]&&parseFloat(r)>0&&-1!=["d","e","f","g","E","G"].indexOf(e)&&(s=" "),t["#"]&&0!=parseInt(r))switch(e){case"o":s="0";break;case"x":case"X":s="0x";break;case"b":s="0b";break;case"B":s="0B"}if(t[0]&&!t["-"]&&(a="0"),t.width&&t.width>n.length+s.length)for(var c=t.width-n.length-s.length,f=0;f<c;++f)o+=a;return t["-"]&&!t[0]?n+=o:n=o+n,s+n}null==r&&(r=[]);for(var n="",s=0,o=0,a={long:!1,short:!1,long_long:!1},i=!1,c=!1,f=!1,l=!1,u=!1,h=!1,g=".",p=0;p<e.length;++p){var b=e.charAt(p);if(i){switch(b){case"i":b="d";break;case"D":a.long=!0,b="d";break;case"U":a.long=!0,b="u";break;case"O":a.long=!0,b="o";break;case"F":b="f"}switch(b){case"c":case"s":case"d":case"u":case"o":case"x":case"e":case"f":case"g":case"X":case"E":case"G":case"b":case"B":var w=r[o];if(u){var d=w;if(w instanceof Array)d=w;else if("string"==typeof w||w instanceof String)d=w.split("").map(function(e){return e.charCodeAt()});else if(("number"==typeof w||w instanceof Number)&&a.bitwidth){d=[];do{d.unshift(w&~(-1<<a.bitwidth))}while(w>>>=a.bitwidth)}else d=w.toString().split("").map(function(e){return e.charCodeAt()});n+=d.map(function(e){return t(b,e,a)}).join(g)}else n+=t(b,w,a);l||++s,o=s,a={},c=!1,i=!1,f=!1,l=!1,u=!1,h=!1,g=".";break;case"v":u=!0;break;case" ":case"0":case"-":case"+":case"#":a[b]=!0;break;case"*":c=!0;break;case".":f=!0;break;case"@":h=!0;break;case"l":a.long?(a.long_long=!0,a.long=!1):(a.long=!0,a.long_long=!1),a.short=!1;break;case"q":case"L":a.long_long=!0,a.long=!1,a.short=!1;break;case"h":a.short=!0,a.long=!1,a.long_long=!1}if(/\d/.test(b)){var m=parseInt(e.substr(p));if(p+=m.toString().length-1,"$"==e.charAt(p+1)){if(m<0||m>r.length)throw"out of bound";c?(f?(a.precision=r[m-1],f=!1):"v"==e.charAt(p+2)?g=r[m-1]:a.width=r[m-1],c=!1):(l=!0,o=m-1),++p}else f?(a.precision=m,f=!1):h?(a.bitwidth=m,h=!1):a.width=m}else c&&!/\d/.test(e.charAt(p+1))&&(f?(a.precision=r[o],f=!1):"v"==e.charAt(p+1)?g=r[o]:a.width=r[o],++s,l||o++,c=!1)}else{if("%"==b){if("%"==e.charAt(p+1)){n+="%",++p;continue}i=!0;continue}n+=b}}return n},jQuery.sprintf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var e=Array.prototype.slice.call(arguments),r=e.shift();return jQuery.vsprintf(r,e)},jQuery.fn.printf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var e=Array.prototype.slice.call(arguments),r=e.shift();return this.append(jQuery.vsprintf(r,e))},jQuery.fn.vprintf=function(e,r){if(0==arguments.length)throw"Not enough arguments for sprintf";return this.append(jQuery.vsprintf(e,r))},jQuery.fn.vformat=function(e){if(0==arguments.length)throw"Not enough arguments for sprintf";return this.each(function(){self=jQuery(this),self.html(jQuery.vsprintf(self.html(),e))})},jQuery.fn.format=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var e=Array.prototype.slice.call(arguments);return this.each(function(){self=jQuery(this),self.html(jQuery.vsprintf(self.html(),e))})},jQuery.printf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var e=Array.prototype.slice.call(arguments),r=e.shift(),t=jQuery.vsprintf(r,e);window.console?window.console.info(t):window.dump(t)},jQuery.vprintf=function(e,r){if(0==arguments.length)throw"Not enough arguments for sprintf";var t=jQuery.vsprintf(e,r);window.console?window.console.info(t):window.dump(t)};
